
let nextId = 12;
let masterList = [
    {
        id: 1,
        name: "Iga Swiatek",
        Country: "Poland",
        Height: "5'9\"",
        Age: 21,
        pointCount: 2055,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Madison Keys",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "0"
                ],
                s2: [
                    "6",
                    "0"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Caroline Garcia",
                tournament: "WTA 1000[32 Players]",
                placement: "Semifinals",
                s1: [
                    "6",
                    "3"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Jessica Pegula",
                tournament: "WTA 1000[32 Players]",
                placement: "Finals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Coco Gauff",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "4",
                    "6"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Ons Jabeur",
                tournament: "WTA 250[32 Players]",
                placement: "Semifinals",
                s1: [
                    "6",
                    "3"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "6",
                    "1"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Maria Sakkari",
                tournament: "WTA 250[32 Players]",
                placement: "Finals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "7",
                    "5"
                ]
            }
        ]
    },
    {
        id: 3,
        name: "Jessica Pegula",
        Country: "United States",
        Height: "5'7\"",
        Age: 28,
        pointCount: 1255,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Veronika Kudermetova",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "6",
                    "3"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Coco Gauff",
                tournament: "WTA 1000[32 Players]",
                placement: "Semifinals",
                s1: [
                    "7",
                    "5"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "6",
                    "4"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Iga Swiatek",
                tournament: "WTA 1000[32 Players]",
                placement: "Finals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 6,
        name: "Caroline Garcia",
        Country: "France",
        Height: "5'10\"",
        Age: 29,
        pointCount: 775,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Aryna Sabalenka",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "6",
                    "3"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Iga Swiatek",
                tournament: "WTA 1000[32 Players]",
                placement: "Semifinals",
                s1: [
                    "3",
                    "6"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Aryna Sabalenka",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "2",
                    "6"
                ],
                s3: [
                    "6",
                    "3"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Maria Sakkari",
                tournament: "WTA 250[32 Players]",
                placement: "Semifinals",
                s1: [
                    "3",
                    "6"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 4,
        name: "Coco Gauff",
        Country: "United States",
        Height: "5'9\"",
        Age: 18,
        pointCount: 665,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Daria Kasatkina",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "7",
                    "5"
                ],
                s2: [
                    "6",
                    "1"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-30",
                opponet: "Jessica Pegula",
                tournament: "WTA 1000[32 Players]",
                placement: "Semifinals",
                s1: [
                    "5",
                    "7"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "4",
                    "6"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Iga Swiatek",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "6",
                    "4"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 11,
        name: "Madison Keys",
        Country: "United States",
        Height: "5'10\"",
        Age: 27,
        pointCount: 215,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Iga Swiatek",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "0",
                    "6"
                ],
                s2: [
                    "0",
                    "6"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 9,
        name: "Veronika Kudermetova",
        Country: "Russia",
        Height: "5'8\"",
        Age: 25,
        pointCount: 215,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Jessica Pegula",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "3",
                    "6"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 8,
        name: "Daria Kasatkina",
        Country: "Russia",
        Height: "5'9\"",
        Age: 21,
        pointCount: 275,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Coco Gauff",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "5",
                    "7"
                ],
                s2: [
                    "1",
                    "6"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Maria Sakkari",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "-",
                    "-"
                ]
            }
        ]
    },
    {
        id: 7,
        name: "Aryna Sabalenka",
        Country: "Belarus",
        Height: "5'11\"",
        Age: 24,
        pointCount: 275,
        Matches: [
            {
                date: "2022-11-30",
                opponet: "Caroline Garcia",
                tournament: "WTA 1000[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "5",
                    "7"
                ],
                s3: [
                    "3",
                    "6"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Caroline Garcia",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "6",
                    "2"
                ],
                s3: [
                    "3",
                    "6"
                ]
            }
        ]
    },
    {
        id: 10,
        name: "Simona Halep",
        Country: "Romania",
        Height: "5'6\"",
        Age: 31,
        pointCount: 60,
        Matches: [
            {
                date: "2022-11-24",
                opponet: "Ons Jabeur",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "6",
                    "4"
                ],
                s3: [
                    "1",
                    "6"
                ]
            }
        ]
    },
    {
        id: 5,
        name: "Maria Sakkari",
        Country: "Greece",
        Height: "5'8\"",
        Age: 27,
        pointCount: 350,
        Matches: [
            {
                date: "2022-11-24",
                opponet: "Daria Kasatkina",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Caroline Garcia",
                tournament: "WTA 250[32 Players]",
                placement: "Semifinals",
                s1: [
                    "6",
                    "3"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "-",
                    "-"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Iga Swiatek",
                tournament: "WTA 250[32 Players]",
                placement: "Finals",
                s1: [
                    "4",
                    "6"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "5",
                    "7"
                ]
            }
        ]
    },
    {
        id: 2,
        name: "Ons Jabeur",
        Country: "Tunisia",
        Height: "5'6\"",
        Age: 28,
        pointCount: 170,
        Matches: [
            {
                date: "2022-11-24",
                opponet: "Simona Halep",
                tournament: "WTA 250[32 Players]",
                placement: "Quarterfinals",
                s1: [
                    "6",
                    "4"
                ],
                s2: [
                    "4",
                    "6"
                ],
                s3: [
                    "6",
                    "1"
                ]
            },
            {
                date: "2022-11-24",
                opponet: "Iga Swiatek",
                tournament: "WTA 250[32 Players]",
                placement: "Semifinals",
                s1: [
                    "3",
                    "6"
                ],
                s2: [
                    "7",
                    "5"
                ],
                s3: [
                    "1",
                    "6"
                ]
            }
        ]
    }
]


let gamesUnsorted=[
    {
        date: "2022-11-30",
        playerOne: "Jessica Pegula",
        playerTwo: "Veronika Kudermetova",
        tournament: "WTA 1000[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "6",
            "4"
        ],
        s2: [
            "6",
            "3"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Coco Gauff",
        playerTwo: "Daria Kasatkina",
        tournament: "WTA 1000[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "7",
            "5"
        ],
        s2: [
            "6",
            "1"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Caroline Garcia",
        playerTwo: "Aryna Sabalenka",
        tournament: "WTA 1000[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "4",
            "6"
        ],
        s2: [
            "7",
            "5"
        ],
        s3: [
            "6",
            "3"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Iga Swiatek",
        playerTwo: "Madison Keys",
        tournament: "WTA 1000[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "6",
            "0"
        ],
        s2: [
            "6",
            "0"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Jessica Pegula",
        playerTwo: "Coco Gauff",
        tournament: "WTA 1000[32 Players]",
        placement: "Semifinals",
        s1: [
            "7",
            "5"
        ],
        s2: [
            "5",
            "7"
        ],
        s3: [
            "6",
            "4"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Caroline Garcia",
        playerTwo: "Iga Swiatek",
        tournament: "WTA 1000[32 Players]",
        placement: "Semifinals",
        s1: [
            "3",
            "6"
        ],
        s2: [
            "5",
            "7"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-30",
        playerOne: "Jessica Pegula",
        playerTwo: "Iga Swiatek",
        tournament: "WTA 1000[32 Players]",
        placement: "Finals",
        s1: [
            "4",
            "6"
        ],
        s2: [
            "5",
            "7"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Ons Jabeur",
        playerTwo: "Simona Halep",
        tournament: "WTA 250[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "6",
            "4"
        ],
        s2: [
            "4",
            "6"
        ],
        s3: [
            "6",
            "1"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Iga Swiatek",
        playerTwo: "Coco Gauff",
        tournament: "WTA 250[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "4",
            "6"
        ],
        s2: [
            "4",
            "6"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Caroline Garcia",
        playerTwo: "Aryna Sabalenka",
        tournament: "WTA 250[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "6",
            "4"
        ],
        s2: [
            "2",
            "6"
        ],
        s3: [
            "6",
            "3"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Maria Sakkari",
        playerTwo: "Daria Kasatkina",
        tournament: "WTA 250[32 Players]",
        placement: "Quarterfinals",
        s1: [
            "6",
            "4"
        ],
        s2: [
            "7",
            "5"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Ons Jabeur",
        playerTwo: "Iga Swiatek",
        tournament: "WTA 250[32 Players]",
        placement: "Semifinals",
        s1: [
            "3",
            "6"
        ],
        s2: [
            "7",
            "5"
        ],
        s3: [
            "1",
            "6"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Caroline Garcia",
        playerTwo: "Maria Sakkari",
        tournament: "WTA 250[32 Players]",
        placement: "Semifinals",
        s1: [
            "3",
            "6"
        ],
        s2: [
            "5",
            "7"
        ],
        s3: [
            "-",
            "-"
        ]
    },
    {
        date: "2022-11-24",
        playerOne: "Iga Swiatek",
        playerTwo: "Maria Sakkari",
        tournament: "WTA 250[32 Players]",
        placement: "Finals",
        s1: [
            "6",
            "4"
        ],
        s2: [
            "5",
            "7"
        ],
        s3: [
            "7",
            "5"
        ]
    }
];

const rankingPoints = [
    {
        id: 0,
        Tournament : "Grand Slam[128 Players]",
        points: {
            Winner : 2000,
            Finals : 1300,
            Semifinals : 780,
            Quarterfinals : 430,
            R16 : 240,
            R32 : 130,
            R64 : 70,
            R128: 10
        }
    },
    {
        id: 1,
        Tournament : "WTA 1000[96 Players]",
        points: {
            Winner : 1000,
            Finals : 650,
            Semifinals : 390,
            Quarterfinals : 215,
            R16 : 120,
            R32 : 65,
            R64 : 35,
            R128: 10
        }
    },
    {
        id: 2,
        Tournament : "WTA 1000[64 Players]",
        points: {
            Winner : 1000,
            Finals : 650,
            Semifinals : 390,
            Quarterfinals : 215,
            R16 : 120,
            R32 : 65,
            R64 : 10,
            R128: null
        }
    },
    {
        id: 3,
        Tournament : "WTA 1000[32 Players]",
        points: {
            Winner : 1000,
            Finals : 650,
            Semifinals : 390,
            Quarterfinals : 215,
            R16 : 120,
            R32 : 10,
            R64 : null,
            R128: null
        }
    },
    {
        id: 4,
        Tournament : " WTA 1000[56 Players]",
        points: {
            Winner : 900,
            Finals : 585,
            Semifinals : 350,
            Quarterfinals : 190,
            R16 : 105,
            R32 : 60,
            R64 : 1,
            R128: null
        }
    },
    {
        id: 5,
        Tournament : "WTA 500[64/56/48 Players]",
        points: {
            Winner : 470,
            Finals : 350,
            Semifinals : 185,
            Quarterfinals : 100,
            R16 : 55,
            R32 : 30,
            R64 : 1,
            R128: null
        }
    },
    {
        id: 6,
        Tournament : "WTA 500[32/30/28 Players]",
        points: {
            Winner : 470,
            Finals : 350,
            Semifinals : 185,
            Quarterfinals : 100,
            R16 : 55,
            R32 : 1,
            R64 : null,
            R128: null
        }
    },
    {
        id: 7,
        Tournament : "WTA 250[56 Players]",
        points: {
            Winner : 280,
            Finals : 180,
            Semifinals : 110,
            Quarterfinals : 60,
            R16 : 30,
            R32 : 16,
            R64 : 1,
            R128: null
        }
    },
    {
        id: 8,
        Tournament : "WTA 250[32 Players]",
        points: {
            Winner : 280,
            Finals : 180,
            Semifinals : 110,
            Quarterfinals : 60,
            R16 : 30,
            R32 : 1,
            R64 : null,
            R128: null
        }
    },
    {
        id: 9,
        Tournament : "WTA 125[48 Players]",
        points: {
            Winner : 160,
            Finals : 95,
            Semifinals : 57,
            Quarterfinals : 29,
            R16 : 15,
            R32 : 8,
            R64 : 1,
            R128: null
        }
    },
    {
        id: 10,
        Tournament : "WTA 125[32 Players]",
        points: {
            Winner : 160,
            Finals : 95,
            Semifinals : 57,
            Quarterfinals : 29,
            R16 : 15,
            R32 : 1,
            R64 : null,
            R128: null
        }
    }


]

//returns a list of all players
function getMasterList(){
    if (localStorage.getItem("players")===null)
        localStorage.setItem("players",JSON.stringify(masterList));

    return JSON.parse(localStorage.getItem("players"));

}

//returns a list of all games played
function getGames(){
    if (localStorage.getItem("gamesUnsorted")===null)
        localStorage.setItem("gamesUnsorted",JSON.stringify(gamesUnsorted));

    return JSON.parse(localStorage.getItem("gamesUnsorted"));


}
//returns tournament data
function getRankingPoints(){
    return rankingPoints;

}

//given a tournament name returns the data about the tournament
function getTournamentFromName(str){
    for (obj of rankingPoints){
        if(obj.Tournament==str){
            return obj;
        }
    }
    return -1;
}
//adds a player to the "players" key in localStorage
function addPlayer(pName,pCurrPoints,pCountry,pHeight,pAge){

    


    let player = {
        id:parseInt(nextId),
        name:pName,
        Country: pCountry,
        Height:pHeight,
        Age: parseInt(pAge),
        pointCount:parseInt(pCurrPoints),
        Matches: []

        
    }
    nextId++;
    masterList.push(player);
    localStorage.setItem("players",JSON.stringify(masterList));


}

//updates the "players" localStorage along with the "gamesUnsorted" localStorage
function addMatch(p1Name, p2Name, p1s1,p1s2,p1s3,p2s1,p2s2,p2s3,datePlayed,pTournament,pPlacemnet,points){
    let matchOne = {
        date:datePlayed,
        opponet:p1Name,
        tournament:pTournament,
        placement:pPlacemnet,

        s1:[p2s1,p1s1],
        s2:[p2s2,p1s2],
        s3:[p2s3,p1s3]
    }
    let matchTwo = {
        date:datePlayed,
        opponet:p2Name,
        tournament:pTournament,
        placement:pPlacemnet,
        s1:[p1s1,p2s1],
        s2:[p1s2,p2s2],
        s3:[p1s3,p2s3]
    }
    let matchesArr = getGames();
    matchesArr.push({
        date:datePlayed,
        playerOne:p1Name,
        playerTwo:p2Name,
        tournament:pTournament,
        placement:pPlacemnet,
        s1:[p1s1,p2s1],
        s2:[p1s2,p2s2],
        s3:[p1s3,p2s3]
    })
    let p1Won = false;
    let p2Won = false;
    if (p1s3=="-"){
        p1Won=p1s2>p2s2;
        p2Won=p2s2>p1s2;
    } else{
        p1Won=p1s3>p2s3;
        p2Won=p2s3>p1s3;
    }
    localStorage.setItem("gamesUnsorted",JSON.stringify(matchesArr));

    let list = getMasterList();

    for (let obj of list){
        if(obj.name.toLowerCase().trim()==p1Name.toLowerCase().trim()){
            obj.Matches.push(matchTwo);

            if (matchTwo.placement.toLowerCase().trim()=="finals" && p1Won){
                obj.pointCount= parseInt(obj.pointCount) + getTournamentFromName(pTournament).points.Winner;
            }else{
                obj.pointCount=parseInt(obj.pointCount)+points;
            }
        }
        if(obj.name.toLowerCase().trim()==p2Name.toLowerCase().trim()){
            obj.Matches.push(matchOne);

            if (matchTwo.placement.toLowerCase().trim()=="finals" && p2Won){
                obj.pointCount= parseInt(obj.pointCount) + getTournamentFromName(pTournament).points.Winner;
            }else{
                obj.pointCount=parseInt(obj.pointCount)+points;
            }
            
        }
    }
    localStorage.setItem("players",JSON.stringify(list));

}

//toggles the hamburger elements
function toggleNav(button){
    if(button.classList.contains('is-active')){
        button.classList.remove('is-active');
        document.querySelector('#mainNav').classList.remove('is-active');
    }else{
        button.classList.add('is-active');
        document.querySelector('#mainNav').classList.add('is-active');
    }
    


}
